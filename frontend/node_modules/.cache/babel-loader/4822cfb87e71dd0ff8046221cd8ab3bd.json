{"ast":null,"code":"import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';import{detailsOrder,payOrder}from'../actions/orderActions';import PaypalButton from'../components/PaypalButton';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function OrderScreen(props){var orderPay=useSelector(function(state){return state.orderPay;});// console.log(orderPay);\nvar loadingPay=orderPay.loading,successPay=orderPay.success,errorPay=orderPay.error;var dispatch=useDispatch();useEffect(function(){if(successPay){props.history.push(\"/profile\");}else{dispatch(detailsOrder(props.match.params.id));}return function(){};},[successPay]);var handleSuccessPayment=function handleSuccessPayment(paymentResult){dispatch(payOrder(order,paymentResult));};var orderDetails=useSelector(function(state){return state.detailsOrder;});// console.log(orderDetails);\nvar loading=orderDetails.loading,order=orderDetails.order,error=orderDetails.error;return loading?/*#__PURE__*/_jsx(\"div\",{children:\"Loading ...\"}):error?/*#__PURE__*/_jsx(\"div\",{children:error}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"placeorder\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"placeorder-info\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Shipping\"}),/*#__PURE__*/_jsxs(\"div\",{children:[order.shipping.address,\", \",order.shipping.city,\",\",order.shipping.postalCode,\", \",order.shipping.country,\",\"]}),/*#__PURE__*/_jsx(\"div\",{children:order.isDelivered?\"Delivered at \"+order.deliveredAt:\"Not Delivered.\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Payment\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Payment Method: \",order.payment.paymentMethod]}),/*#__PURE__*/_jsx(\"div\",{children:order.isPaid?\"Paid at \"+order.paidAt:\"Not Paid.\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"ul\",{className:\"cart-list-container\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Shopping Cart\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Price\"})]}),order.orderItems.length===0?/*#__PURE__*/_jsx(\"div\",{children:\"Cart is empty\"}):order.orderItems.map(function(item){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-image\",children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:\"product\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-name\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Link,{to:\"/product/\"+item.product,children:item.name})}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Qty: \",item.qty]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-price\",children:[\"$\",item.price]})]},item._id);})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"placeorder-action\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{className:\"placeorder-actions-payment\",children:[loadingPay&&/*#__PURE__*/_jsx(\"div\",{children:\"Finishing Payment...\"}),!order.isPaid&&/*#__PURE__*/_jsx(PaypalButton,{amount:order.totalPrice,onSuccess:handleSuccessPayment})]}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"h3\",{children:\"Order Summary\"})}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{children:\"Items\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"$\",order.itemsPrice]})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{children:\"Shipping\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"$\",order.shippingPrice]})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{children:\"Tax\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"$\",order.taxPrice]})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{children:\"Order Total\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"$\",order.totalPrice]})]})]})})]})});}export default OrderScreen;","map":{"version":3,"sources":["C:/Users/Captain/ecommerce/frontend/src/screens/OrderScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Link","detailsOrder","payOrder","PaypalButton","OrderScreen","props","orderPay","state","loadingPay","loading","successPay","success","errorPay","error","dispatch","history","push","match","params","id","handleSuccessPayment","paymentResult","order","orderDetails","shipping","address","city","postalCode","country","isDelivered","deliveredAt","payment","paymentMethod","isPaid","paidAt","orderItems","length","map","item","image","product","name","qty","price","_id","totalPrice","itemsPrice","shippingPrice","taxPrice"],"mappings":"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","sourcesContent":["import React, { useEffect} from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport {detailsOrder, payOrder } from '../actions/orderActions';\r\n\r\nimport PaypalButton from '../components/PaypalButton';\r\nfunction OrderScreen(props) {\r\n\r\n  const orderPay = useSelector(state => state.orderPay);\r\n  // console.log(orderPay);\r\n  const { loading: loadingPay, success: successPay, error: errorPay } = orderPay;\r\n  \r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    if (successPay) {\r\n      props.history.push(\"/profile\");\r\n    } else {\r\n      dispatch(detailsOrder(props.match.params.id));\r\n    }\r\n    return () => {\r\n    };\r\n  }, [successPay]);\r\n\r\n  const handleSuccessPayment = (paymentResult) => {\r\n    dispatch(payOrder(order, paymentResult));\r\n  }\r\n  \r\n  const orderDetails = useSelector(state => state.detailsOrder);\r\n  \r\n  // console.log(orderDetails);\r\n  const {loading, order, error} = orderDetails;\r\n\r\n  return loading ? <div>Loading ...</div> : error ? <div>{error}</div> :\r\n    <div>\r\n      <div className=\"placeorder\">\r\n        <div className=\"placeorder-info\">\r\n          <div>\r\n          \r\n            <h3>\r\n              Shipping\r\n          </h3>\r\n          \r\n            <div>\r\n              {order.shipping.address}, {order.shipping.city},\r\n          {order.shipping.postalCode}, {order.shipping.country},\r\n          </div>\r\n            <div>\r\n              {order.isDelivered ? \"Delivered at \" + order.deliveredAt : \"Not Delivered.\"}\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <h3>Payment</h3>\r\n            <div>\r\n              Payment Method: {order.payment.paymentMethod}\r\n            </div>\r\n            <div>\r\n              {order.isPaid ? \"Paid at \" + order.paidAt : \"Not Paid.\"}\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <ul className=\"cart-list-container\">\r\n              <li>\r\n                <h3>\r\n                  Shopping Cart\r\n          </h3>\r\n                <div>\r\n                  Price\r\n          </div>\r\n              </li>\r\n              {\r\n                order.orderItems.length === 0 ?\r\n                  <div>\r\n                    Cart is empty\r\n          </div>\r\n                  :\r\n                  order.orderItems.map(item =>\r\n                    <li key={item._id}>\r\n                      <div className=\"cart-image\">\r\n                        <img src={item.image} alt=\"product\" />\r\n                      </div>\r\n                      <div className=\"cart-name\">\r\n                        <div>\r\n                          <Link to={\"/product/\" + item.product}>\r\n                            {item.name}\r\n                          </Link>\r\n\r\n                        </div>\r\n                        <div>\r\n                          Qty: {item.qty}\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"cart-price\">\r\n                        ${item.price}\r\n                      </div>\r\n                    </li>\r\n                  )\r\n              }\r\n            </ul>\r\n          </div>\r\n\r\n\r\n        </div>\r\n        <div className=\"placeorder-action\">\r\n          <ul>\r\n            <li className=\"placeorder-actions-payment\">\r\n              {loadingPay && <div>Finishing Payment...</div>}\r\n              {!order.isPaid &&\r\n                <PaypalButton\r\n                  amount={order.totalPrice}\r\n                  onSuccess={handleSuccessPayment} />\r\n              }\r\n            </li>\r\n            <li>\r\n              <h3>Order Summary</h3>\r\n            </li>\r\n            <li>\r\n              <div>Items</div>\r\n              <div>${order.itemsPrice}</div>\r\n            </li>\r\n            <li>\r\n              <div>Shipping</div>\r\n              <div>${order.shippingPrice}</div>\r\n            </li>\r\n            <li>\r\n              <div>Tax</div>\r\n              <div>${order.taxPrice}</div>\r\n            </li>\r\n            <li>\r\n              <div>Order Total</div>\r\n              <div>${order.totalPrice}</div>\r\n            </li>\r\n          </ul>\r\n\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n\r\n}\r\n\r\nexport default OrderScreen;\r\n"]},"metadata":{},"sourceType":"module"}