{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Captain/ecommerce/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/Users/Captain/ecommerce/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import{useSelector,useDispatch}from'react-redux';import{detailsProduct,saveProductReview}from'../actions/productActions';import Rating from'../components/Rating';import{PRODUCT_REVIEW_SAVE_RESET}from'../constants/productConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ProductScreen(props){var _useState=useState(1),_useState2=_slicedToArray(_useState,2),qty=_useState2[0],setQty=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),rating=_useState4[0],setRating=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),comment=_useState6[0],setComment=_useState6[1];var userSignin=useSelector(function(state){return state.userSignin;});var userInfo=userSignin.userInfo;var productDetails=useSelector(function(state){return state.productDetails;});var product=productDetails.product,loading=productDetails.loading,error=productDetails.error;var productReviewSave=useSelector(function(state){return state.productReviewSave;});var productSaveSuccess=productReviewSave.success;var dispatch=useDispatch();useEffect(function(){if(productSaveSuccess){alert('Review submitted successfully.');setRating(0);setComment('');dispatch({type:PRODUCT_REVIEW_SAVE_RESET});}dispatch(detailsProduct(props.match.params.id));return function(){//\n};},[productSaveSuccess]);var submitHandler=function submitHandler(e){e.preventDefault();// dispatch actions\ndispatch(saveProductReview(props.match.params.id,{name:userInfo.name,rating:rating,comment:comment}));};var handleAddToCart=function handleAddToCart(){props.history.push('/cart/'+props.match.params.id+'?qty='+qty);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"back-to-result\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Back to result\"})}),loading?/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}):error?/*#__PURE__*/_jsxs(\"div\",{children:[error,\" \"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"details-image\",children:/*#__PURE__*/_jsx(\"img\",{src:product.image,alt:\"product\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"details-info\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"h4\",{children:product.name})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#reviews\",children:/*#__PURE__*/_jsx(Rating,{value:product.rating,text:product.numReviews+' reviews'})})}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Price: \",/*#__PURE__*/_jsxs(\"b\",{children:[\"$\",product.price]})]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Description:\",/*#__PURE__*/_jsx(\"div\",{children:product.description})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"details-action\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"Price: \",product.price]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Status:\",' ',product.countInStock>0?'In Stock':'Unavailable.']}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Qty:\",' ',/*#__PURE__*/_jsx(\"select\",{value:qty,onChange:function onChange(e){setQty(e.target.value);},children:_toConsumableArray(Array(product.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})})]}),/*#__PURE__*/_jsx(\"li\",{children:product.countInStock>0&&/*#__PURE__*/_jsx(\"button\",{onClick:handleAddToCart,className:\"button primary\",children:\"Add to Cart\"})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content-margined\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Reviews\"}),!product.reviews.length&&/*#__PURE__*/_jsx(\"div\",{children:\"There is no review\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"review\",id:\"reviews\",children:[product.reviews.map(function(review){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{children:review.name}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Rating,{value:review.rating})}),/*#__PURE__*/_jsx(\"div\",{children:review.createdAt.substring(0,10)}),/*#__PURE__*/_jsx(\"div\",{children:review.comment})]},review._id);}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Write a customer review\"}),userInfo?/*#__PURE__*/_jsx(\"form\",{onSubmit:submitHandler,children:/*#__PURE__*/_jsxs(\"ul\",{className:\"form-container\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"rating\",children:\"Rating\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"rating\",id:\"rating\",value:rating,onChange:function onChange(e){return setRating(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"1- Poor\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"2- Fair\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"3- Good\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"4- Very Good\"}),/*#__PURE__*/_jsx(\"option\",{value:\"5\",children:\"5- Excelent\"})]})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"comment\",children:\"Comment\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"comment\",value:comment,onChange:function onChange(e){return setComment(e.target.value);}})]}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button primary\",children:\"Submit\"})})]})}):/*#__PURE__*/_jsxs(\"div\",{children:[\"Please \",/*#__PURE__*/_jsx(Link,{to:\"/signin\",children:\"Sign-in\"}),\" to write a review.\"]})]})]})]})]})]});}export default ProductScreen;","map":{"version":3,"sources":["C:/Users/Captain/ecommerce/frontend/src/screens/ProductScreen.js"],"names":["React","useEffect","useState","Link","useSelector","useDispatch","detailsProduct","saveProductReview","Rating","PRODUCT_REVIEW_SAVE_RESET","ProductScreen","props","qty","setQty","rating","setRating","comment","setComment","userSignin","state","userInfo","productDetails","product","loading","error","productReviewSave","productSaveSuccess","success","dispatch","alert","type","match","params","id","submitHandler","e","preventDefault","name","handleAddToCart","history","push","image","numReviews","price","description","countInStock","target","value","Array","keys","map","x","reviews","length","review","createdAt","substring","_id"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { detailsProduct, saveProductReview } from '../actions/productActions';\r\nimport Rating from '../components/Rating';\r\nimport { PRODUCT_REVIEW_SAVE_RESET } from '../constants/productConstants';\r\n\r\nfunction ProductScreen(props) {\r\n  const [qty, setQty] = useState(1);\r\n  const [rating, setRating] = useState(0);\r\n  const [comment, setComment] = useState('');\r\n  const userSignin = useSelector((state) => state.userSignin);\r\n  const { userInfo } = userSignin;\r\n  const productDetails = useSelector((state) => state.productDetails);\r\n  const { product, loading, error } = productDetails;\r\n  const productReviewSave = useSelector((state) => state.productReviewSave);\r\n  const { success: productSaveSuccess } = productReviewSave;\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (productSaveSuccess) {\r\n      alert('Review submitted successfully.');\r\n      setRating(0);\r\n      setComment('');\r\n      dispatch({ type: PRODUCT_REVIEW_SAVE_RESET });\r\n    }\r\n    dispatch(detailsProduct(props.match.params.id));\r\n    return () => {\r\n      //\r\n    };\r\n  }, [productSaveSuccess]);\r\n  const submitHandler = (e) => {\r\n    e.preventDefault();\r\n    // dispatch actions\r\n    dispatch(\r\n      saveProductReview(props.match.params.id, {\r\n        name: userInfo.name,\r\n        rating: rating,\r\n        comment: comment,\r\n      })\r\n    );\r\n  };\r\n  const handleAddToCart = () => {\r\n    props.history.push('/cart/' + props.match.params.id + '?qty=' + qty);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"back-to-result\">\r\n        <Link to=\"/\">Back to result</Link>\r\n      </div>\r\n      {loading ? (\r\n        <div>Loading...</div>\r\n      ) : error ? (\r\n        <div>{error} </div>\r\n      ) : (\r\n        <>\r\n          <div className=\"details\">\r\n            <div className=\"details-image\">\r\n              <img src={product.image} alt=\"product\"></img>\r\n            </div>\r\n            <div className=\"details-info\">\r\n              <ul>\r\n                <li>\r\n                  <h4>{product.name}</h4>\r\n                </li>\r\n                <li>\r\n                  <a href=\"#reviews\">\r\n                    <Rating\r\n                      value={product.rating}\r\n                      text={product.numReviews + ' reviews'}\r\n                    />\r\n                  </a>\r\n                </li>\r\n                <li>\r\n                  Price: <b>${product.price}</b>\r\n                </li>\r\n                <li>\r\n                  Description:\r\n                  <div>{product.description}</div>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <div className=\"details-action\">\r\n              <ul>\r\n                <li>Price: {product.price}</li>\r\n                <li>\r\n                  Status:{' '}\r\n                  {product.countInStock > 0 ? 'In Stock' : 'Unavailable.'}\r\n                </li>\r\n                <li>\r\n                  Qty:{' '}\r\n                  <select\r\n                    value={qty}\r\n                    onChange={(e) => {\r\n                      setQty(e.target.value);\r\n                    }}\r\n                  >\r\n                    {[...Array(product.countInStock).keys()].map((x) => (\r\n                      <option key={x + 1} value={x + 1}>\r\n                        {x + 1}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </li>\r\n                <li>\r\n                  {product.countInStock > 0 && (\r\n                    <button\r\n                      onClick={handleAddToCart}\r\n                      className=\"button primary\"\r\n                    >\r\n                      Add to Cart\r\n                    </button>\r\n                  )}\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n          <div className=\"content-margined\">\r\n            <h2>Reviews</h2>\r\n            {!product.reviews.length && <div>There is no review</div>}\r\n            <ul className=\"review\" id=\"reviews\">\r\n              {product.reviews.map((review) => (\r\n                <li key={review._id}>\r\n                  <div>{review.name}</div>\r\n                  <div>\r\n                    <Rating value={review.rating}></Rating>\r\n                  </div>\r\n                  <div>{review.createdAt.substring(0, 10)}</div>\r\n                  <div>{review.comment}</div>\r\n                </li>\r\n              ))}\r\n              <li>\r\n                <h3>Write a customer review</h3>\r\n                {userInfo ? (\r\n                  <form onSubmit={submitHandler}>\r\n                    <ul className=\"form-container\">\r\n                      <li>\r\n                        <label htmlFor=\"rating\">Rating</label>\r\n                        <select\r\n                          name=\"rating\"\r\n                          id=\"rating\"\r\n                          value={rating}\r\n                          onChange={(e) => setRating(e.target.value)}\r\n                        >\r\n                          <option value=\"1\">1- Poor</option>\r\n                          <option value=\"2\">2- Fair</option>\r\n                          <option value=\"3\">3- Good</option>\r\n                          <option value=\"4\">4- Very Good</option>\r\n                          <option value=\"5\">5- Excelent</option>\r\n                        </select>\r\n                      </li>\r\n                      <li>\r\n                        <label htmlFor=\"comment\">Comment</label>\r\n                        <textarea\r\n                          name=\"comment\"\r\n                          value={comment}\r\n                          onChange={(e) => setComment(e.target.value)}\r\n                        ></textarea>\r\n                      </li>\r\n                      <li>\r\n                        <button type=\"submit\" className=\"button primary\">\r\n                          Submit\r\n                        </button>\r\n                      </li>\r\n                    </ul>\r\n                  </form>\r\n                ) : (\r\n                  <div>\r\n                    Please <Link to=\"/signin\">Sign-in</Link> to write a review.\r\n                  </div>\r\n                )}\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\nexport default ProductScreen;"]},"metadata":{},"sourceType":"module"}