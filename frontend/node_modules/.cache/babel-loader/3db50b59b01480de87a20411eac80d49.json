{"ast":null,"code":"import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';import CheckoutSteps from'../components/CheckoutSteps';import{createOrder}from'../actions/orderActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PlaceOrderScreen(props){var cart=useSelector(function(state){return state.cart;});var orderCreate=useSelector(function(state){return state.orderCreate;});var success=orderCreate.success,order=orderCreate.order;var cartItems=cart.cartItems,shipping=cart.shipping,payment=cart.payment;if(!shipping.address){props.history.push(\"/shipping\");}else if(!payment.paymentMethod){props.history.push(\"/payment\");}var itemsPrice=cartItems.reduce(function(a,c){return a+c.price*c.qty;},0);var shippingPrice=itemsPrice>100?0:10;var taxPrice=0.15*itemsPrice;var totalPrice=itemsPrice+shippingPrice+taxPrice;var dispatch=useDispatch();var placeOrderHandler=function placeOrderHandler(){// create an order\ndispatch(createOrder({orderItems:cartItems,shipping:shipping,payment:payment,itemsPrice:itemsPrice,shippingPrice:shippingPrice,taxPrice:taxPrice,totalPrice:totalPrice}));};useEffect(function(){if(success){props.history.push(\"/order/\"+order._id);}});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CheckoutSteps,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"placeorder\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"placeorder-info\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Shipping\"}),/*#__PURE__*/_jsxs(\"div\",{children:[cart.shipping.address,\", \",cart.shipping.city,\",\",cart.shipping.postalCode,\", \",cart.shipping.country]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Payment\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Payment Method: \",cart.payment.paymentMethod]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"ul\",{className:\"cart-list-container\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Shopping Cart\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Price\"})]}),cartItems.length===0?/*#__PURE__*/_jsx(\"div\",{children:\"Cart is empty\"}):cartItems.map(function(item){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-image\",children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:\"product\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-name\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Link,{to:\"/product/\"+item.product,children:item.name})}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Qty: \",item.qty]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-price\",children:[\"$\",item.price]})]});})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"placeorder-action\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"button primary full-width\",onClick:placeOrderHandler,children:\"Place Order\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"h3\",{children:\"Order Summary\"})}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{children:\"Items\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"$\",itemsPrice]})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{children:\"Shipping\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"$\",shippingPrice]})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{children:\"Tax\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"$\",taxPrice]})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{children:\"Order Total\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"$\",totalPrice]})]})]})})]})]});}export default PlaceOrderScreen;","map":{"version":3,"sources":["C:/Users/Captain/ecommerce/frontend/src/screens/PlaceOrderScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Link","CheckoutSteps","createOrder","PlaceOrderScreen","props","cart","state","orderCreate","success","order","cartItems","shipping","payment","address","history","push","paymentMethod","itemsPrice","reduce","a","c","price","qty","shippingPrice","taxPrice","totalPrice","dispatch","placeOrderHandler","orderItems","_id","city","postalCode","country","length","map","item","image","product","name"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,aAAP,KAA0B,6BAA1B,CACA,OAASC,WAAT,KAA4B,yBAA5B,C,wFACA,QAASC,CAAAA,gBAAT,CAA0BC,KAA1B,CAAiC,CAE/B,GAAMC,CAAAA,IAAI,CAAGN,WAAW,CAAC,SAAAO,KAAK,QAAIA,CAAAA,KAAK,CAACD,IAAV,EAAN,CAAxB,CACA,GAAME,CAAAA,WAAW,CAAGR,WAAW,CAAC,SAAAO,KAAK,QAAIA,CAAAA,KAAK,CAACC,WAAV,EAAN,CAA/B,CAH+B,GAItBC,CAAAA,OAJsB,CAIHD,WAJG,CAItBC,OAJsB,CAIbC,KAJa,CAIHF,WAJG,CAIbE,KAJa,IAMvBC,CAAAA,SANuB,CAMUL,IANV,CAMvBK,SANuB,CAMZC,QANY,CAMUN,IANV,CAMZM,QANY,CAMFC,OANE,CAMUP,IANV,CAMFO,OANE,CAO/B,GAAI,CAACD,QAAQ,CAACE,OAAd,CAAuB,CACrBT,KAAK,CAACU,OAAN,CAAcC,IAAd,CAAmB,WAAnB,EACD,CAFD,IAEO,IAAI,CAACH,OAAO,CAACI,aAAb,CAA4B,CACjCZ,KAAK,CAACU,OAAN,CAAcC,IAAd,CAAmB,UAAnB,EACD,CACD,GAAME,CAAAA,UAAU,CAAGP,SAAS,CAACQ,MAAV,CAAiB,SAACC,CAAD,CAAIC,CAAJ,QAAUD,CAAAA,CAAC,CAAGC,CAAC,CAACC,KAAF,CAAUD,CAAC,CAACE,GAA1B,EAAjB,CAAgD,CAAhD,CAAnB,CACA,GAAMC,CAAAA,aAAa,CAAGN,UAAU,CAAG,GAAb,CAAmB,CAAnB,CAAuB,EAA7C,CACA,GAAMO,CAAAA,QAAQ,CAAG,KAAOP,UAAxB,CACA,GAAMQ,CAAAA,UAAU,CAAGR,UAAU,CAAGM,aAAb,CAA6BC,QAAhD,CAEA,GAAME,CAAAA,QAAQ,CAAG5B,WAAW,EAA5B,CAEA,GAAM6B,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,CAC9B;AACAD,QAAQ,CAACxB,WAAW,CAAC,CACnB0B,UAAU,CAAElB,SADO,CACIC,QAAQ,CAARA,QADJ,CACcC,OAAO,CAAPA,OADd,CACuBK,UAAU,CAAVA,UADvB,CACmCM,aAAa,CAAbA,aADnC,CAEnBC,QAAQ,CAARA,QAFmB,CAETC,UAAU,CAAVA,UAFS,CAAD,CAAZ,CAAR,CAID,CAND,CAOA5B,SAAS,CAAC,UAAM,CACd,GAAIW,OAAJ,CAAa,CACXJ,KAAK,CAACU,OAAN,CAAcC,IAAd,CAAmB,UAAYN,KAAK,CAACoB,GAArC,EACD,CAEF,CALQ,CAAT,CAOA,mBAAO,oCACL,KAAC,aAAD,EAAe,KAAK,KAApB,CAAqB,KAAK,KAA1B,CAA2B,KAAK,KAAhC,CAAiC,KAAK,KAAtC,EADK,cAEL,aAAK,SAAS,CAAC,YAAf,wBACE,aAAK,SAAS,CAAC,iBAAf,wBACE,oCACE,gCADF,cAIE,uBACGxB,IAAI,CAACM,QAAL,CAAcE,OADjB,MAC4BR,IAAI,CAACM,QAAL,CAAcmB,IAD1C,KAECzB,IAAI,CAACM,QAAL,CAAcoB,UAFf,MAE6B1B,IAAI,CAACM,QAAL,CAAcqB,OAF3C,GAJF,GADF,cAUE,oCAEE,+BAFF,cAGE,0CACmB3B,IAAI,CAACO,OAAL,CAAaI,aADhC,GAHF,GAVF,cAiBE,kCACE,YAAI,SAAS,CAAC,qBAAd,wBACE,mCACE,qCADF,cAIE,8BAJF,GADF,CAUIN,SAAS,CAACuB,MAAV,GAAqB,CAArB,cACE,sCADF,CAKEvB,SAAS,CAACwB,GAAV,CAAc,SAAAC,IAAI,qBAChB,mCACE,YAAK,SAAS,CAAC,YAAf,uBACE,YAAK,GAAG,CAAEA,IAAI,CAACC,KAAf,CAAsB,GAAG,CAAC,SAA1B,EADF,EADF,cAIE,aAAK,SAAS,CAAC,WAAf,wBACE,kCACE,KAAC,IAAD,EAAM,EAAE,CAAE,YAAcD,IAAI,CAACE,OAA7B,UACGF,IAAI,CAACG,IADR,EADF,EADF,cAOE,+BACQH,IAAI,CAACb,GADb,GAPF,GAJF,cAeE,aAAK,SAAS,CAAC,YAAf,eACIa,IAAI,CAACd,KADT,GAfF,GADgB,EAAlB,CAfN,GADF,EAjBF,GADF,cA2DE,YAAK,SAAS,CAAC,mBAAf,uBACE,mCACE,iCACE,eAAQ,SAAS,CAAC,2BAAlB,CAA8C,OAAO,CAAEM,iBAAvD,yBADF,EADF,cAIE,iCACE,qCADF,EAJF,cAOE,mCACE,8BADF,cAEE,2BAAOV,UAAP,GAFF,GAPF,cAWE,mCACE,iCADF,cAEE,2BAAOM,aAAP,GAFF,GAXF,cAeE,mCACE,4BADF,cAEE,2BAAOC,QAAP,GAFF,GAfF,cAmBE,mCACE,oCADF,cAEE,2BAAOC,UAAP,GAFF,GAnBF,GADF,EA3DF,GAFK,GAAP,CA2FD,CAED,cAAetB,CAAAA,gBAAf","sourcesContent":["import React, { useEffect,} from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport CheckoutSteps from '../components/CheckoutSteps';\r\nimport { createOrder } from '../actions/orderActions';\r\nfunction PlaceOrderScreen(props) {\r\n\r\n  const cart = useSelector(state => state.cart);\r\n  const orderCreate = useSelector(state => state.orderCreate);\r\n  const {  success, order } = orderCreate;\r\n\r\n  const { cartItems, shipping, payment } = cart;\r\n  if (!shipping.address) {\r\n    props.history.push(\"/shipping\");\r\n  } else if (!payment.paymentMethod) {\r\n    props.history.push(\"/payment\");\r\n  }\r\n  const itemsPrice = cartItems.reduce((a, c) => a + c.price * c.qty, 0);\r\n  const shippingPrice = itemsPrice > 100 ? 0 : 10;\r\n  const taxPrice = 0.15 * itemsPrice;\r\n  const totalPrice = itemsPrice + shippingPrice + taxPrice;\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const placeOrderHandler = () => {\r\n    // create an order\r\n    dispatch(createOrder({\r\n      orderItems: cartItems, shipping, payment, itemsPrice, shippingPrice,\r\n      taxPrice, totalPrice\r\n    }));\r\n  }\r\n  useEffect(() => {\r\n    if (success) {\r\n      props.history.push(\"/order/\" + order._id);\r\n    }\r\n\r\n  });\r\n\r\n  return <div>\r\n    <CheckoutSteps step1 step2 step3 step4 ></CheckoutSteps>\r\n    <div className=\"placeorder\">\r\n      <div className=\"placeorder-info\">\r\n        <div>\r\n          <h3>\r\n            Shipping\r\n          </h3>\r\n          <div>\r\n            {cart.shipping.address}, {cart.shipping.city},\r\n          {cart.shipping.postalCode}, {cart.shipping.country}\r\n          </div>\r\n        </div>\r\n        <div>\r\n          \r\n          <h3>Payment</h3>\r\n          <div>\r\n            Payment Method: {cart.payment.paymentMethod}\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <ul className=\"cart-list-container\">\r\n            <li>\r\n              <h3>\r\n                Shopping Cart\r\n          </h3>\r\n              <div>\r\n                Price\r\n          </div>\r\n            </li>\r\n            {\r\n              cartItems.length === 0 ?\r\n                <div>\r\n                  Cart is empty\r\n          </div>\r\n                :\r\n                cartItems.map(item =>\r\n                  <li>\r\n                    <div className=\"cart-image\">\r\n                      <img src={item.image} alt=\"product\" />\r\n                    </div>\r\n                    <div className=\"cart-name\">\r\n                      <div>\r\n                        <Link to={\"/product/\" + item.product}>\r\n                          {item.name}\r\n                        </Link>\r\n\r\n                      </div>\r\n                      <div>\r\n                        Qty: {item.qty}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"cart-price\">\r\n                      ${item.price}\r\n                    </div>\r\n                  </li>\r\n                )\r\n            }\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div className=\"placeorder-action\">\r\n        <ul>\r\n          <li>\r\n            <button className=\"button primary full-width\" onClick={placeOrderHandler} >Place Order</button>\r\n          </li>\r\n          <li>\r\n            <h3>Order Summary</h3>\r\n          </li>\r\n          <li>\r\n            <div>Items</div>\r\n            <div>${itemsPrice}</div>\r\n          </li>\r\n          <li>\r\n            <div>Shipping</div>\r\n            <div>${shippingPrice}</div>\r\n          </li>\r\n          <li>\r\n            <div>Tax</div>\r\n            <div>${taxPrice}</div>\r\n          </li>\r\n          <li>\r\n            <div>Order Total</div>\r\n            <div>${totalPrice}</div>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n}\r\n\r\nexport default PlaceOrderScreen;"]},"metadata":{},"sourceType":"module"}