{"ast":null,"code":"import _slicedToArray from\"C:/Users/Captain/ecommerce/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{logout,update}from'../actions/userActions';import{listMyOrders}from'../actions/orderActions';import{useDispatch,useSelector}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProfileScreen(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),orders=_useState8[0],setOrders=_useState8[1];var dispatch=useDispatch();var userSignin=useSelector(function(state){return state.userSignin;});var userInfo=userSignin.userInfo;var handleLogout=function handleLogout(){dispatch(logout());props.history.push(\"/signin\");};var submitHandler=function submitHandler(e){e.preventDefault();dispatch(update({userId:userInfo._id,email:email,name:name,password:password}));};var userUpdate=useSelector(function(state){return state.userUpdate;});var loading=userUpdate.loading,success=userUpdate.success,error=userUpdate.error;var myOrderList=useSelector(function(state){return state.myOrderList;});console.log(myOrderList);var loadingOrders=myOrderList.loading,errorOrders=myOrderList.error;useEffect(function(){if(userInfo){console.log(userInfo.name);setEmail(userInfo.email);setName(userInfo.name);setPassword(userInfo.password);setOrders(myOrderList.order);}dispatch(listMyOrders());return function(){};},[userInfo]);return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-info\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form\",children:/*#__PURE__*/_jsx(\"form\",{onSubmit:submitHandler,children:/*#__PURE__*/_jsxs(\"ul\",{className:\"form-container\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"h2\",{children:\"User Profile\"})}),/*#__PURE__*/_jsxs(\"li\",{children:[loading&&/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}),error&&/*#__PURE__*/_jsx(\"div\",{children:error}),success&&/*#__PURE__*/_jsx(\"div\",{children:\"Profile Saved Successfully.\"})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{value:name,type:\"name\",name:\"name\",id:\"name\",onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{value:email,type:\"email\",name:\"email\",id:\"email\",onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{value:password,type:\"password\",id:\"password\",name:\"password\",onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button primary\",children:\"Update\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleLogout,className:\"button secondary full-width\",children:\"Logout\"})})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-orders content-margined\",children:loadingOrders?/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}):errorOrders?/*#__PURE__*/_jsxs(\"div\",{children:[errorOrders,\" \"]}):/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DATE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"TOTAL\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PAID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ACTIONS\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(function(order){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:order._id}),/*#__PURE__*/_jsx(\"td\",{children:order.createdAt}),/*#__PURE__*/_jsx(\"td\",{children:order.totalPrice}),/*#__PURE__*/_jsx(\"td\",{children:order.isPaid}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:\"/order/\"+order._id,children:\"DETAILS\"})})]});})})]})})]});}export default ProfileScreen;","map":{"version":3,"sources":["C:/Users/Captain/ecommerce/frontend/src/screens/ProfileScreen.js"],"names":["React","useState","useEffect","Link","logout","update","listMyOrders","useDispatch","useSelector","ProfileScreen","props","name","setName","password","setPassword","email","setEmail","orders","setOrders","dispatch","userSignin","state","userInfo","handleLogout","history","push","submitHandler","e","preventDefault","userId","_id","userUpdate","loading","success","error","myOrderList","console","log","loadingOrders","errorOrders","order","target","value","map","createdAt","totalPrice","isPaid"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { logout, update } from '../actions/userActions';\r\nimport { listMyOrders } from '../actions/orderActions';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nfunction ProfileScreen(props) {\r\n  const [name, setName] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [orders,setOrders]=useState([]);\r\n  const dispatch = useDispatch();\r\n\r\n  const userSignin = useSelector(state => state.userSignin);\r\n  const { userInfo } = userSignin;\r\n  \r\n  const handleLogout = () => {\r\n    dispatch(logout());\r\n    props.history.push(\"/signin\");\r\n  }\r\n  const submitHandler = (e) => {\r\n    e.preventDefault();\r\n    dispatch(update({ userId: userInfo._id, email, name, password }))\r\n  }\r\n  const userUpdate = useSelector(state => state.userUpdate);\r\n  const { loading, success, error } = userUpdate;\r\n\r\n  const myOrderList = useSelector(state => state.myOrderList);\r\n  console.log(myOrderList)\r\n  const { loading: loadingOrders,error: errorOrders, } = myOrderList;\r\n  \r\n  useEffect(() => {\r\n    if (userInfo) {\r\n      console.log(userInfo.name)\r\n      setEmail(userInfo.email);\r\n      setName(userInfo.name);\r\n      setPassword(userInfo.password);\r\n      setOrders(myOrderList.order);\r\n       \r\n    }\r\n    dispatch(listMyOrders());\r\n    return () => {\r\n  \r\n    };\r\n  }, [userInfo])\r\n\r\n  return <div className=\"profile\">\r\n    <div className=\"profile-info\">\r\n      <div className=\"form\">\r\n        <form onSubmit={submitHandler} >\r\n          <ul className=\"form-container\">\r\n            <li>\r\n              <h2>User Profile</h2>\r\n            </li>\r\n            <li>\r\n              {loading && <div>Loading...</div>}\r\n              {error && <div>{error}</div>}\r\n              {success && <div>Profile Saved Successfully.</div>}\r\n            </li>\r\n            <li>\r\n              <label htmlFor=\"name\">\r\n                Name\r\n          </label>\r\n              <input value={name} type=\"name\" name=\"name\" id=\"name\" onChange={(e) => setName(e.target.value)}>\r\n              </input>\r\n            </li>\r\n            <li>\r\n              <label htmlFor=\"email\">\r\n                Email\r\n          </label>\r\n              <input value={email} type=\"email\" name=\"email\" id=\"email\" onChange={(e) => setEmail(e.target.value)}>\r\n              </input>\r\n            </li>\r\n            <li>\r\n              <label htmlFor=\"password\">Password</label>\r\n              <input value={password} type=\"password\" id=\"password\" name=\"password\" onChange={(e) => setPassword(e.target.value)}>\r\n              </input>\r\n            </li>\r\n\r\n            <li>\r\n              <button type=\"submit\" className=\"button primary\">Update</button>\r\n            </li>\r\n            <li>\r\n              <button type=\"button\" onClick={handleLogout} className=\"button secondary full-width\">Logout</button>\r\n            </li>\r\n\r\n          </ul>\r\n        </form>\r\n      </div>\r\n    </div>\r\n    <div className=\"profile-orders content-margined\">\r\n      {\r\n        loadingOrders ? <div>Loading...</div> :\r\n          errorOrders ? <div>{errorOrders} </div> :\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>ID</th>\r\n                  <th>DATE</th>\r\n                  <th>TOTAL</th>\r\n                  <th>PAID</th>\r\n                  <th>ACTIONS</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {orders.map(order => (\r\n                <tr >\r\n                  <td>{order._id}</td>\r\n                  <td>{order.createdAt}</td>\r\n                  <td>{order.totalPrice}</td>\r\n                  <td>{order.isPaid}</td>\r\n                  <td>\r\n                    <Link to={\"/order/\" + order._id}>DETAILS</Link>\r\n                  </td>\r\n                </tr>))}\r\n              </tbody>\r\n            </table>\r\n      }\r\n    </div>\r\n  </div>\r\n}\r\n\r\nexport default ProfileScreen;"]},"metadata":{},"sourceType":"module"}